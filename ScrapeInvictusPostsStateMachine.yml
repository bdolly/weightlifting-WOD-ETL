dependsOn: InvictusAPIRequestsSQS
name: ScrapeInvictusPostsStateMachine
role:
  Fn::GetAtt: ["SemiStructuedPostStateMachineRole", "Arn"]
definition:
  StartAt: CalcPostsPages
  States:
    CalcPostsPages:
      Type: Task
      Resource:
        Fn::GetAtt: [calc_sqs_items_from_api, Arn]
      Next: MapItemsToQueque
    MapItemsToQueque:
      Type: Map
      End: True
      # Next: ProcessQuequeItemsToBucket
      Iterator:
        StartAt: PushItemToQueque
        States:
          PushItemToQueque:
            Type: Task
            End: true
            Resource:
              Fn::GetAtt: [push_item_to_queque, Arn]
    # ProcessQuequeItemsToBucket:
    #   Type: Task
    #   End: True
    #   Resource:
    #     Fn::GetAtt: [process_queque_items, Arn]
